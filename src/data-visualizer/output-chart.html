<!DOCTYPE HTML>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
        <title>Sensor processed data</title>
        <!--<link rel="stylesheet" href="style.css" type="text/css">-->
        <!-- AmCharts base and serial charts module -->
        <script src="amcharts/amcharts.js" type="text/javascript"></script>
        <script src="amcharts/serial.js" type="text/javascript"></script>
        <!-- theme file -->
        <script src="amcharts/themes/light.js" type="text/javascript"></script>
        <script src="amcharts/themes/dark.js" type="text/javascript"></script>
        <script src="amcharts/themes/black.js" type="text/javascript"></script>
        <!-- export modules -->
        <script src="amcharts/exporting/amexport.js"
            type="text/javascript"></script>
        <script src="amcharts/exporting/rgbcolor.js"
            type="text/javascript"></script>
        <script src="amcharts/exporting/canvg.js"
            type="text/javascript"></script>
        <script src="amcharts/exporting/filesaver.js"
            type="text/javascript"></script>
        <script src="jsdat.js" type="text/javascript"></script>
    </head>
    <body>
        <div id="chartdiv" style="width: 100%; height: 500px;"></div>
        <div id="legenddiv" style="width: 100%; height: 300px;"></div>
        <div id="daystatdiv" style="width: 100%; height: 500px;"></div>
    </body>

    <script type="text/javascript">
        var makeScrollBar = function() {
            var chartScrollbar = new AmCharts.ChartScrollbar();
            chartScrollbar.scrollbarHeight = 40;
            chartScrollbar.updateOnReleaseOnly = true;
            chartScrollbar.autoGridCount = true;
            chartScrollbar.color = "#000000";
            chartScrollbar.selectedGraphFillColor = "#BB4444";
            chartScrollbar.selectedGraphLineColor = "#BB4444";
            chartScrollbar.graphFillColor = "#EEBBBB";
            chartScrollbar.graphLineColor = "#EEBBBB";
            return chartScrollbar;
        }

        var makeExportConfig = function() {
            return {
                menuTop: "61px",
                menuBottom: "auto",
                menuLeft: "53px",
                backgroundColor: "#efefef",
                menuItemStyle: {
                    backgroundColor: '#EFEFEF',
                    rollOverBackgroundColor: '#DDDDDD'
                },
                menuItems: [{
                    textAlign: 'center',
                    icon: 'amcharts/images/export.png',
                    onclick:function(){},
                    items: [{
                            title: 'JPG',
                            format: 'jpg'
                        }, {
                            title: 'PNG',
                            format: 'png'
                        }, {
                            title: 'SVG',
                            format: 'svg'
                    }]
                }]
            };

        }

        AmCharts.ready(function() {
            // chart setting
            var chart = new AmCharts.AmSerialChart();
            chart.pathToImages = "amcharts/images/";
            chart.dataProvider = chartData;
            chart.categoryField = "date";
            chart.dataDateFormat = "YYYY-MM-DD HH:NN:SS";
            chart.creditsPosition = "bottom-right";
            var categoryAxis = chart.categoryAxis;
            categoryAxis.parseDates = true;
            categoryAxis.minPeriod = "ss";

            // y axis setting
            // regular value axis
            var valueAxis = new AmCharts.ValueAxis();
            chart.addValueAxis(valueAxis);

            // value axis used for fills
            var valueAxisColumn = new AmCharts.ValueAxis();
            valueAxisColumn.stackType = "100%";
            valueAxisColumn.labelsEnabled = false;
            valueAxisColumn.gridAlpha = 0;
            valueAxisColumn.axisAlpha = 0;
            chart.addValueAxis(valueAxisColumn);

            var valueAxisBlank = new AmCharts.ValueAxis();
            valueAxisBlank.labelsEnabled = false;
            valueAxisBlank.gridAlpha = 0;
            valueAxisBlank.axisAlpha = 0;
            chart.addValueAxis(valueAxisBlank);

            var valueAxisXYZAcc = new AmCharts.ValueAxis();
            valueAxisXYZAcc.gridAlpha = 0;
            chart.addValueAxis(valueAxisXYZAcc);

            // graph creation and setting
            var hOff = new AmCharts.AmGraph();
            hOff.type = "step";
            hOff.valueAxis = valueAxisColumn;
            hOff.valueField = "hOff";
            hOff.alphaField = "hOff";
            hOff.title = "Heater is off";
            hOff.lineColor = "#0000FF";
            hOff.lineAlpha = 0;
            hOff.fillAlphas = 0.5;
            hOff.showBalloon = false;
            chart.addGraph(hOff);

            var hOn = new AmCharts.AmGraph();
            hOn.type = "step";
            hOn.valueAxis = valueAxisColumn;
            hOn.valueField = "hOn";
            hOn.alphaField = "hOn";
            hOn.title = "Heater is on";
            hOn.lineColor = "#FF0000";
            hOn.lineAlpha = 0;
            hOn.fillAlphas = 0.5;
            hOn.showBalloon = false;
            chart.addGraph(hOn);

            var graphScroll = new AmCharts.AmGraph();
            graphScroll.type = "step";
            graphScroll.valueAxis = valueAxisBlank;
            graphScroll.valueField = "hOn";
            graphScroll.lineAlpha = 0;
            graphScroll.fillAlphas = 0;
            graphScroll.showBalloon = false;
            graphScroll.visibleInLegend = false;
            chart.addGraph(graphScroll);

            var tGraph = new AmCharts.AmGraph();
            tGraph.valueAxis = valueAxisXYZAcc;
            tGraph.valueField = "temp";
            tGraph.title = "Temperature (Â°C)";
            tGraph.type = "line";
            tGraph.bullet = "round";
            tGraph.showBalloon = false;
            tGraph.hideBulletsCount = 35;
            chart.addGraph(tGraph);

            var graph = new AmCharts.AmGraph();
            graph.valueAxis = valueAxisXYZAcc;
            graph.valueField = "x";
            graph.title = "Acceleration in X direction";
            graph.type = "line";
            graph.bullet = "round";
            graph.showBalloon = false;
            chart.addGraph(graph);

            var graph2 = new AmCharts.AmGraph();
            graph2.valueAxis = valueAxisXYZAcc;
            graph2.valueField = "y";
            graph2.title = "Acceleration in Y direction";
            graph2.type = "line";
            graph2.bullet = "round";
            graph2.showBalloon = false;
            chart.addGraph(graph2);

            var graph3 = new AmCharts.AmGraph();
            graph3.valueAxis = valueAxisXYZAcc;
            graph3.valueField = "z";
            graph3.title = "Acceleration in Z direction";
            graph3.type = "line";
            graph3.bullet = "round";
            graph3.showBalloon = false;
            chart.addGraph(graph3);

            // cursor
            chartCursor = new AmCharts.ChartCursor();
            chartCursor.cursorPosition = "mouse";
            chartCursor.pan = true;
            chartCursor.categoryBalloonDateFormat = "HH:NN:SS";
            chart.addChartCursor(chartCursor);

            // scrollbar
            var chartScrollbar = makeScrollBar();
            chartScrollbar.graph = graphScroll;
            chartScrollbar.usePeriod = "HH";
            chart.addChartScrollbar(chartScrollbar);

            // export
            chart.exportConfig = makeExportConfig();

            // chart legend and writing
            var legend = new AmCharts.AmLegend();
            chart.addLegend(legend, "legenddiv");
            chart.write('chartdiv');

            var dayStatChartData = [{
                "date":"2014-05-10",
                "dActiv":"218"
            },{
                "date":"2014-05-11",
                "dActiv":"4380"
            }];
            // daily heat activation duration (statistics)
            dayStatChart = new AmCharts.AmSerialChart();
            dayStatChart.pathToImages = "amcharts/images/";
            dayStatChart.dataProvider = dayStatChartData;
            dayStatChart.categoryField = "date";
            dayStatChart.dataDateFormat = "YYYY-MM-DD";
            dayStatChart.creditsPosition = "bottom-right";
            var categoryAxis = dayStatChart.categoryAxis;
            categoryAxis.parseDates = true;
            categoryAxis.minPeriod = "DD";

            // main axis
            var dateValueAxis = new AmCharts.ValueAxis();
            dateValueAxis.title = "Heater activation duration";
            dateValueAxis.duration = "ss";
            dateValueAxis.durationUnits = {
                "hh": "h ",
                "mm": "min ",
                "ss": "sec"
            };
            dayStatChart.addValueAxis(dateValueAxis);

            // graph
            var dayStatGraph = new AmCharts.AmGraph();
            dayStatGraph.valueField = "dActiv";
            dayStatGraph.title = "Daily heater activity";
            dayStatGraph.type = "column";
            dayStatGraph.fillAlphas = 1;
            dayStatGraph.labelPosition = "middle";
            dayStatGraph.labelText = "[[value]]";
            dayStatChart.addGraph(dayStatGraph);

            // cursor
            chartCursor = new AmCharts.ChartCursor();
            chartCursor.fullWidth = true;
            chartCursor.cursorAlpha = 0.1;
            chartCursor.cursorColor = "#000000";
            dayStatChart.addChartCursor(chartCursor);

            // scrollbar
            chartScrollbar = makeScrollBar();
            chartScrollbar.graph = dayStatGraph;
            dayStatChart.addChartScrollbar(chartScrollbar);

            // export
            dayStatChart.exportConfig = makeExportConfig();
            dayStatChart.exportConfig.menuLeft = "160px";

            // chart writing
            dayStatChart.write('daystatdiv');
        });
    </script>
</html>

